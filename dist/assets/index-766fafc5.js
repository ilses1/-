import{Q as Ae,L as Le,d as E,r as k,D as de,m as B,G as R,c as b,x as ue,H as A,R as ze,q as Ne,J as Oe,K as Ee,M as He,N as De,S as Me}from"./index-e92d1c66.js";import{W as q,x as fe,X as We,r as Ze,Y as ve,c as H,n as N,m as Q,a as L,s as J,Z as he,e as be,g as Fe,v as p,_ as ee,A as z,w as j,t as D,N as G,d as je,C as X,u as Ue,G as Ve,$ as Ke,j as le,B as Xe,Q as Ye,a0 as re,h as qe,f as Ge,b as Qe,a1 as Je}from"./index-a2f0c7ad.js";import{u as ge}from"./use-id-9e27a97e.js";import{u as U,L as pe}from"./request-14faacb8.js";import{a as et,r as tt}from"./use-route-70d6c1c8.js";import{S as nt,a as at}from"./index-ef91f42b.js";import{u as it}from"./use-refs-7c3c1893.js";import{c as ot}from"./interceptor-a823686a.js";function lt(e,l,i){let c=0;const n=e.scrollLeft,a=i===0?1:Math.round(i*1e3/16);function r(){e.scrollLeft+=(l-n)/a,++c<a&&q(r)}r()}function rt(e,l,i,c){let n=fe(e);const a=n<l,r=i===0?1:Math.round(i*1e3/16),g=(l-n)/r;function s(){n+=g,(a&&n>l||!a&&n<l)&&(n=l),We(e,n),a&&n<l||!a&&n>l?q(s):c&&q(c)}s()}function me(e,l){if(!Ze||!window.IntersectionObserver)return;const i=new IntersectionObserver(a=>{l(a[0].intersectionRatio>0)},{root:document.body}),c=()=>{e.value&&i.observe(e.value)},n=()=>{e.value&&i.unobserve(e.value)};Ae(n),Le(n),ve(c)}const[st,ct]=H("sticky"),dt={zIndex:N,position:Q("top"),container:Object,offsetTop:L(0),offsetBottom:L(0)};var ut=E({name:st,props:dt,emits:["scroll","change"],setup(e,{emit:l,slots:i}){const c=k(),n=J(c),a=de({fixed:!1,width:0,height:0,transform:0}),r=B(()=>he(e.position==="top"?e.offsetTop:e.offsetBottom)),g=B(()=>{const{fixed:f,height:w,width:h}=a;if(f)return{width:`${h}px`,height:`${w}px`}}),s=B(()=>{if(!a.fixed)return;const f=be(Fe(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${r.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),S=f=>l("scroll",{scrollTop:f,isFixed:a.fixed}),m=()=>{if(!c.value||ee(c))return;const{container:f,position:w}=e,h=z(c),u=fe(window);if(a.width=h.width,a.height=h.height,w==="top")if(f){const x=z(f),d=x.bottom-r.value-a.height;a.fixed=r.value>h.top&&x.bottom>0,a.transform=d<0?d:0}else a.fixed=r.value>h.top;else{const{clientHeight:x}=document.documentElement;if(f){const d=z(f),I=x-d.top-r.value-a.height;a.fixed=x-r.value<h.bottom&&x>d.top,a.transform=I<0?-I:0}else a.fixed=x-r.value<h.bottom}S(u)};return R(()=>a.fixed,f=>l("change",f)),p("scroll",m,{target:n,passive:!0}),me(c,m),()=>{var f;return b("div",{ref:c,style:g.value},[b("div",{class:ct({fixed:a.fixed}),style:s.value},[(f=i.default)==null?void 0:f.call(i)])])}}});const ft=j(ut),[vt,se]=H("tab");var ht=E({name:vt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:N,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:l}){const i=B(()=>{const n={},{type:a,color:r,disabled:g,isActive:s,activeColor:S,inactiveColor:m}=e;r&&a==="card"&&(n.borderColor=r,g||(s?n.backgroundColor=r:n.color=r));const w=s?S:m;return w&&(n.color=w),n}),c=()=>{const n=b("span",{class:se("text",{ellipsis:!e.scrollable})},[l.title?l.title():e.title]);return e.dot||G(e.badge)&&e.badge!==""?b(je,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>b("div",{id:e.id,role:"tab",class:[se([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[c()])}});const[bt,ce]=H("tabs");var gt=E({name:bt,props:{count:X(Number),inited:Boolean,animated:Boolean,duration:X(N),swipeable:Boolean,lazyRender:Boolean,currentIndex:X(Number)},emits:["change"],setup(e,{emit:l,slots:i}){const c=k(),n=g=>l("change",g),a=()=>{var g;const s=(g=i.default)==null?void 0:g.call(i);return e.animated||e.swipeable?b(nt,{ref:c,loop:!1,class:ce("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[s]}):s},r=g=>{const s=c.value;s&&s.state.active!==g&&s.swipeTo(g,{immediate:!e.inited})};return R(()=>e.currentIndex,r),ue(()=>{r(e.currentIndex)}),U({swipeRef:c}),()=>b("div",{class:ce("content",{animated:e.animated||e.swipeable})},[a()])}});const[xe,F]=H("tabs"),mt={type:Q("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:L(0),duration:L(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:L(0),background:String,lazyRender:D,lineWidth:N,lineHeight:N,beforeChange:Function,swipeThreshold:L(5),titleActiveColor:String,titleInactiveColor:String},ye=Symbol(xe);var xt=E({name:xe,props:mt,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:l,slots:i}){let c,n,a;const r=k(),g=k(),s=k(),S=k(),m=ge(),f=J(r),[w,h]=it(),{children:u,linkChildren:x}=Ue(ye),d=de({inited:!1,position:"",lineStyle:{},currentIndex:-1}),I=B(()=>u.length>+e.swipeThreshold||!e.ellipsis||e.shrink),V=B(()=>({borderColor:e.color,background:e.background})),_=(t,o)=>{var v;return(v=t.name)!=null?v:o},te=B(()=>{const t=u[d.currentIndex];if(t)return _(t,d.currentIndex)}),K=B(()=>he(e.offsetTop)),ne=B(()=>e.sticky?K.value+c:0),M=t=>{const o=g.value,v=w.value;if(!I.value||!o||!v||!v[d.currentIndex])return;const T=v[d.currentIndex].$el,y=T.offsetLeft-(o.offsetWidth-T.offsetWidth)/2;lt(o,y,t?0:+e.duration)},$=()=>{const t=d.inited;A(()=>{const o=w.value;if(!o||!o[d.currentIndex]||e.type!=="line"||ee(r.value))return;const v=o[d.currentIndex].$el,{lineWidth:T,lineHeight:y}=e,C=v.offsetLeft+v.offsetWidth/2,P={width:le(T),backgroundColor:e.color,transform:`translateX(${C}px) translateX(-50%)`};if(t&&(P.transitionDuration=`${e.duration}s`),G(y)){const oe=le(y);P.height=oe,P.borderRadius=oe}d.lineStyle=P})},Te=t=>{const o=t<d.currentIndex?-1:1;for(;t>=0&&t<u.length;){if(!u[t].disabled)return t;t+=o}},W=(t,o)=>{const v=Te(t);if(!G(v))return;const T=u[v],y=_(T,v),C=d.currentIndex!==null;d.currentIndex!==v&&(d.currentIndex=v,o||M(),$()),y!==e.active&&(l("update:active",y),C&&l("change",y,T.title)),a&&!e.scrollspy&&Ye(Math.ceil(re(r.value)-K.value))},Z=(t,o)=>{const v=u.find((y,C)=>_(y,C)===t),T=v?u.indexOf(v):0;W(T,o)},ae=(t=!1)=>{if(e.scrollspy){const o=u[d.currentIndex].$el;if(o&&f.value){const v=re(o,f.value)-ne.value;n=!0,rt(f.value,v,t?0:+e.duration,()=>{n=!1})}}},Se=(t,o,v)=>{const{title:T,disabled:y}=u[o],C=_(u[o],o);y||(ot(e.beforeChange,{args:[C],done:()=>{W(o),ae()}}),et(t)),l("clickTab",{name:C,title:T,event:v,disabled:y})},Ce=t=>{a=t.isFixed,l("scroll",t)},ke=t=>{A(()=>{Z(t),ae(!0)})},Ie=()=>{for(let t=0;t<u.length;t++){const{top:o}=z(u[t].$el);if(o>ne.value)return t===0?0:t-1}return u.length-1},Be=()=>{if(e.scrollspy&&!n){const t=Ie();W(t)}},Re=()=>u.map((t,o)=>b(ht,Ne({key:t.id,id:`${m}-${o}`,ref:h(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===d.currentIndex,controls:t.id,scrollable:I.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:v=>Se(t,o,v)},qe(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),$e=()=>{if(e.type==="line"&&u.length)return b("div",{class:F("line"),style:d.lineStyle},null)},ie=()=>{var t,o,v;const{type:T,border:y,sticky:C}=e,P=[b("div",{ref:C?void 0:s,class:[F("wrap"),{[Xe]:T==="line"&&y}]},[b("div",{ref:g,role:"tablist",class:F("nav",[T,{shrink:e.shrink,complete:I.value}]),style:V.value,"aria-orientation":"horizontal"},[(t=i["nav-left"])==null?void 0:t.call(i),Re(),$e(),(o=i["nav-right"])==null?void 0:o.call(i)])]),(v=i["nav-bottom"])==null?void 0:v.call(i)];return C?b("div",{ref:s},[P]):P};R([()=>e.color,Ve],$),R(()=>e.active,t=>{t!==te.value&&Z(t)}),R(()=>u.length,()=>{d.inited&&(Z(e.active),$(),A(()=>{M(!0)}))});const _e=()=>{Z(e.active,!0),A(()=>{d.inited=!0,s.value&&(c=z(s.value).height),M(!0)})},Pe=(t,o)=>l("rendered",t,o);return U({resize:()=>{$(),A(()=>{var t,o;return(o=(t=S.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:ke}),ze($),Ke($),ve(_e),me(r,$),p("scroll",Be,{target:f,passive:!0}),x({id:m,props:e,setLine:$,onRendered:Pe,currentName:te,scrollIntoView:M}),()=>b("div",{ref:r,class:F([e.type])},[e.sticky?b(ft,{container:r.value,offsetTop:K.value,onScroll:Ce},{default:()=>[ie()]}):ie(),b(gt,{ref:S,count:u.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:W},{default:()=>{var t;return[(t=i.default)==null?void 0:t.call(i)]}})])}});const we=Symbol(),yt=()=>Oe(we,null),[wt,Y]=H("tab"),Tt=be({},tt,{dot:Boolean,name:N,badge:N,title:String,disabled:Boolean,titleClass:Ge,titleStyle:[String,Object],showZeroBadge:D});var St=E({name:wt,props:Tt,setup(e,{slots:l}){const i=ge(),c=k(!1),{parent:n,index:a}=Qe(ye);if(!n)return;const r=()=>{var m;return(m=e.name)!=null?m:a.value},g=()=>{c.value=!0,n.props.lazyRender&&A(()=>{n.onRendered(r(),e.title)})},s=B(()=>{const m=r()===n.currentName.value;return m&&!c.value&&g(),m}),S=k(!s.value);return R(s,m=>{m?S.value=!1:Je(()=>{S.value=!0})}),R(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Ee(we,s),()=>{var m;const f=`${n.id}-${a.value}`,{animated:w,swipeable:h,scrollspy:u,lazyRender:x}=n.props;if(!l.default&&!w)return;const d=u||s.value;if(w||h)return b(at,{id:i,role:"tabpanel",class:Y("panel-wrapper",{inactive:S.value}),tabindex:s.value?0:-1,"aria-hidden":!s.value,"aria-labelledby":f},{default:()=>{var _;return[b("div",{class:Y("panel")},[(_=l.default)==null?void 0:_.call(l)])]}});const V=c.value||u||!x?(m=l.default)==null?void 0:m.call(l):null;return U({id:i}),He(b("div",{id:i,role:"tabpanel",class:Y("panel"),tabindex:d?0:-1,"aria-labelledby":f},[V]),[[De,d]])}}});const Et=j(St),Ht=j(xt),[Ct,O,kt]=H("list"),It={error:Boolean,offset:L(300),loading:Boolean,disabled:Boolean,finished:Boolean,errorText:String,direction:Q("down"),loadingText:String,finishedText:String,immediateCheck:D};var Bt=E({name:Ct,props:It,emits:["load","update:error","update:loading"],setup(e,{emit:l,slots:i}){const c=k(e.loading),n=k(),a=k(),r=yt(),g=J(n),s=()=>{A(()=>{if(c.value||e.finished||e.disabled||e.error||(r==null?void 0:r.value)===!1)return;const{direction:h}=e,u=+e.offset,x=z(g);if(!x.height||ee(n))return;let d=!1;const I=z(a);h==="up"?d=x.top-I.top<=u:d=I.bottom-x.bottom<=u,d&&(c.value=!0,l("update:loading",!0),l("load"))})},S=()=>{if(e.finished){const h=i.finished?i.finished():e.finishedText;if(h)return b("div",{class:O("finished-text")},[h])}},m=()=>{l("update:error",!1),s()},f=()=>{if(e.error){const h=i.error?i.error():e.errorText;if(h)return b("div",{role:"button",class:O("error-text"),tabindex:0,onClick:m},[h])}},w=()=>{if(c.value&&!e.finished&&!e.disabled)return b("div",{class:O("loading")},[i.loading?i.loading():b(pe,{class:O("loading-icon")},{default:()=>[e.loadingText||kt("loading")]})])};return R(()=>[e.loading,e.finished,e.error],s),r&&R(r,h=>{h&&s()}),Me(()=>{c.value=e.loading}),ue(()=>{e.immediateCheck&&s()}),U({check:s}),p("scroll",s,{target:g,passive:!0}),()=>{var h;const u=(h=i.default)==null?void 0:h.call(i),x=b("div",{ref:a,class:O("placeholder")},null);return b("div",{ref:n,role:"feed",class:O(),"aria-busy":c.value},[e.direction==="down"?u:x,w(),S(),f(),e.direction==="up"?u:x])}}});const Dt=j(Bt);export{Dt as L,Et as T,Ht as a};
