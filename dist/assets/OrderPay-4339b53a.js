import{_ as B}from"./CpPaySheet-6d41b4c0.js";import{_ as D}from"./CpNavBar-aed588de.js";import{g as O,a as F}from"./order-e0974591.js";import{d as N,r,x as V,a as i,b as u,c as a,e,t as n,F as A,v as T,w as v,h as f,j,g as q,z,p as L,k as M,_ as R}from"./index-e92d1c66.js";import{T as E}from"./index-7b16e30e.js";import{I as G}from"./index-a2f0c7ad.js";import{C as U}from"./index-10845d08.js";import{C as H}from"./index-ca072881.js";import{C as J}from"./index-58a204d1.js";import{S as K}from"./index-72ebae05.js";import{S as Q}from"./index-982dd1d6.js";import"./CpIcon-8ee8332b.js";import"./consult-544b3527.js";import"./request-14faacb8.js";import"./interceptor-a823686a.js";import"./index-366e2f39.js";import"./use-route-70d6c1c8.js";import"./use-placeholder-84776c27.js";const y=_=>(L("data-v-a77e769a"),_=_(),M(),_),W={key:0,class:"order-pay-page"},X={class:"order-address"},Y={class:"area"},Z={class:"detail"},ee={class:"order-medical"},ae=y(()=>e("div",{class:"head"},[e("h3",null,"优医药房"),e("small",null,"优医质保 假一赔十")],-1)),te=["src"],se={class:"info"},oe={class:"name"},ne={class:"size"},le={class:"price"},re={class:"desc"},ce={class:"order-detail"},ie={class:"order-tip"},_e=y(()=>e("p",{class:"tip"}," 由于药品的特殊性，如非错发、漏发药品的情况，药品一经发出 不得退换，请核对药品信息无误后下单。 ",-1)),pe=y(()=>e("a",{href:"javascript:;"},"支付协议",-1)),de={key:1,class:"order-pay-page"},ue=N({__name:"OrderPay",setup(_){const g=j();r(!1),r(!1);const x=r(""),h=r(!1),s=r(),k=async()=>{const l=await O({prescriptionId:g.query.id});s.value=l.data},o=r(),w=async()=>{const l=await F();if(l.data.length){const c=l.data.find(p=>p.isDefault===0);c?o.value=c:o.value=l.data[0]}};return V(async()=>{k(),w()}),(l,c)=>{const p=D,b=G,P=E,d=U,C=H,I=J,S=K,$=B,m=Q;return s.value&&o.value?(i(),u("div",W,[a(p,{title:"药品支付"}),e("div",X,[e("p",Y,[a(b,{name:"location"}),e("span",null,n(o.value.province+o.value.city+o.value.county),1)]),e("p",Z,n(o.value.addressDetail),1),e("p",null,n(o.value.receiver)+" "+n(o.value.mobile.replace(/^(\d{3})\d+(\d{4})$/,"$1****$2")),1)]),e("div",ee,[ae,(i(!0),u(A,null,T(s.value.medicines,t=>(i(),u("div",{class:"item van-hairline--top",key:t.id},[e("img",{class:"img",src:t.avatar,alt:""},null,8,te),e("div",se,[e("p",oe,[e("span",null,n(t.name),1),e("span",null,"x"+n(t.quantity),1)]),e("p",ne,[t.prescriptionFlag===1?(i(),q(P,{key:0},{default:v(()=>[f("处方药")]),_:1})):z("",!0),e("span",null,n(t.specs),1)]),e("p",le,"￥"+n(t.amount),1)]),e("div",re,n(t.usageDosag),1)]))),128))]),e("div",ce,[a(C,null,{default:v(()=>[a(d,{title:"药品金额",value:`￥${s.value.payment}`},null,8,["value"]),a(d,{title:"运费",value:`￥${s.value.expressFee}`},null,8,["value"]),a(d,{title:"优惠券",value:`-￥${s.value.couponDeduction}`},null,8,["value"]),a(d,{title:"实付款",value:`￥${s.value.actualPayment}`,class:"price"},null,8,["value"])]),_:1})]),e("div",ie,[_e,a(I,null,{default:v(()=>[f("我已同意"),pe]),_:1})]),a(S,{price:s.value.actualPayment*100,"button-text":"立即支付","button-type":"primary","text-align":"left"},null,8,["price"]),a($,{show:h.value,"onUpdate:show":c[0]||(c[0]=t=>h.value=t),orderId:x.value,actualPayment:s.value.actualPayment,payCallback:"/order/pay/result"},null,8,["show","orderId","actualPayment"])])):(i(),u("div",de,[a(p,{title:"药品支付"}),a(m,{title:"",avatar:"",row:"2",style:{"margin-top":"15px"}}),a(m,{title:"",row:"4",style:{"margin-top":"50px"}}),a(m,{title:"",row:"4",style:{"margin-top":"50px"}})]))}}});const Fe=R(ue,[["__scopeId","data-v-a77e769a"]]);export{Fe as default};
