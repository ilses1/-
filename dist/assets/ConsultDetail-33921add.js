import{_ as E}from"./CpPaySheet-6d41b4c0.js";import{_ as G}from"./CpNavBar-aed588de.js";import{_ as L}from"./avatar-doctor-206a2b5c.js";import{O as c}from"./index-e2c7d3ed.js";import{a as M}from"./index-07659cf1.js";import{i as U}from"./consult-544b3527.js";import{t as W,f as q,C as A}from"./constants-9a2e1e66.js";import{d as H,r as x,x as J,s as K,a as u,b as p,c as e,e as a,t as C,n as Q,f as s,w as o,h as l,z as m,g,i as X,j as Y,p as Z,k as tt,_ as et}from"./index-e92d1c66.js";import{b as at,c as ot}from"./index-4906b622.js";import{S as lt}from"./index-982dd1d6.js";import{s as D}from"./request-14faacb8.js";import{I as st}from"./index-a2f0c7ad.js";import{C as nt}from"./index-10845d08.js";import{C as ut}from"./index-ca072881.js";import{B as it}from"./index-366e2f39.js";import"./CpIcon-8ee8332b.js";import"./index-58a204d1.js";import"./use-placeholder-84776c27.js";import"./order-e0974591.js";import"./interceptor-a823686a.js";import"./use-route-70d6c1c8.js";const rt=d=>{var _;return(_=W.find(v=>v.value===d))==null?void 0:_.label},dt=d=>{var _;return(_=q.find(v=>v.value===d))==null?void 0:_.label},h=d=>(Z("data-v-9fb5b7ea"),d=d(),tt(),d),ct={key:0,class:"consult-detail-page"},pt={class:"detail-head"},_t={class:"text"},vt=h(()=>a("p",{class:"tip"},"服务医生信息",-1)),mt={class:"card"},ft=h(()=>a("img",{class:"avatar",src:L,alt:""},null,-1)),yt={class:"doc"},Ct=h(()=>a("span",null,"极速问诊",-1)),ht={class:"detail-patient"},gt={class:"detail-order"},kt=h(()=>a("h3",null,"订单信息",-1)),wt={key:0,class:"detail-time"},bt={key:1,class:"detail-action van-hairline--top"},It={class:"price"},$t=h(()=>a("span",null,"需付款",-1)),xt={key:2,class:"detail-action van-hairline--top"},Dt={key:3,class:"detail-action van-hairline--top"},Pt={key:4,class:"detail-action van-hairline--top"},St={key:5,class:"detail-action van-hairline--top"},Tt={key:1,class:"consult-detail-page"},Ot=H({__name:"ConsultDetail",setup(d){const{onShowPrescription:_}=ot(),v=x(!1),{copy:P,isSupported:S}=M(),T=async()=>{var f;if(!S.value)return D("未授权，不支持");await P(((f=t.value)==null?void 0:f.orderNo)||""),D("已复制")},O=X(),{loading:B,deleteConsultOrder:N}=at(()=>{O.push("/user/consult")}),V=Y(),t=x();return J(async()=>{const f=await U(V.params.id);t.value=f.data}),(f,i)=>{var I;const k=G,z=st,r=nt,w=ut,F=A,n=it,R=K("consult-more"),j=E,b=lt;return t.value?(u(),p("div",ct,[e(k,{title:"问诊详情"}),a("div",pt,[a("div",_t,[a("h3",null,"图文问诊 "+C(t.value.payment)+" 元",1),a("span",{class:Q(["sta",{orange:t.value.status===s(c).ConsultPay,green:t.value.status===s(c).ConsultChat}])},C(t.value.statusValue),3),vt]),a("div",mt,[ft,a("p",yt,[Ct,a("span",null,C((I=t.value.docInfo)==null?void 0:I.name),1)]),e(z,{name:"arrow"})])]),a("div",ht,[e(w,{border:!1},{default:o(()=>[e(r,{title:"患者信息",value:`${t.value.patientInfo.name} | ${t.value.patientInfo.genderValue} | ${t.value.patientInfo.age}岁`},null,8,["value"]),e(r,{title:"患病时长",value:s(rt)(t.value.illnessTime)},null,8,["value"]),e(r,{title:"就诊情况",value:s(dt)(t.value.consultFlag)},null,8,["value"]),e(r,{title:"病情描述",label:t.value.illnessDesc},null,8,["label"])]),_:1})]),a("div",gt,[kt,e(w,{border:!1},{default:o(()=>[e(r,{title:"订单编号"},{value:o(()=>[a("span",{class:"copy",onClick:i[0]||(i[0]=y=>T())},"复制"),l(" "+C(t.value.orderNo),1)]),_:1}),e(r,{title:"创建时间",value:t.value.createTime},null,8,["value"]),e(r,{title:"应付款",value:`￥${t.value.payment}`},null,8,["value"]),e(r,{title:"优惠券",value:`-￥${t.value.couponDeduction}`},null,8,["value"]),e(r,{title:"积分抵扣",value:`-￥${t.value.pointDeduction}`},null,8,["value"]),e(r,{title:"实付款",value:`￥${t.value.actualPayment}`,class:"price"},null,8,["value"])]),_:1})]),t.value.status===s(c).ConsultPay?(u(),p("div",wt,[l(" 请在 "),e(F,{time:t.value.countdown*1e3},null,8,["time"]),l(" 内完成支付，超时订单将取消 ")])):m("",!0),t.value.status===s(c).ConsultPay?(u(),p("div",bt,[a("div",It,[$t,a("span",null,"￥"+C(t.value.actualPayment),1)]),e(n,{type:"default",round:""},{default:o(()=>[l("取消问诊")]),_:1}),e(n,{type:"primary",onClick:i[1]||(i[1]=y=>v.value=!0),round:""},{default:o(()=>[l("继续支付")]),_:1})])):m("",!0),t.value.status===s(c).ConsultWait?(u(),p("div",xt,[e(n,{type:"default",round:""},{default:o(()=>[l("取消问诊")]),_:1}),e(n,{type:"primary",round:"",to:`/room?orderId=${t.value.id}`},{default:o(()=>[l(" 继续沟通 ")]),_:1},8,["to"])])):m("",!0),t.value.status===s(c).ConsultChat?(u(),p("div",Dt,[t.value.prescriptionId?(u(),g(n,{key:0,type:"default",round:"",onClick:i[2]||(i[2]=y=>{var $;return s(_)(($=t.value)==null?void 0:$.prescriptionId)})},{default:o(()=>[l(" 查看处方 ")]),_:1})):m("",!0),e(n,{type:"primary",round:"",to:`/room?orderId=${t.value.id}`},{default:o(()=>[l(" 继续沟通 ")]),_:1},8,["to"])])):m("",!0),t.value.status===s(c).ConsultComplete?(u(),p("div",Pt,[e(R),e(n,{type:"default",round:"",to:`/room?orderId=${t.value.id}`},{default:o(()=>[l(" 问诊记录 ")]),_:1},8,["to"]),t.value.evaluateId?(u(),g(n,{key:0,type:"default",round:""},{default:o(()=>[l(" 查看评价 ")]),_:1})):(u(),g(n,{key:1,type:"primary",round:""},{default:o(()=>[l(" 写评价 ")]),_:1}))])):m("",!0),t.value.status===s(c).ConsultCancel?(u(),p("div",St,[e(n,{type:"default",round:"",loading:s(B),onClick:i[3]||(i[3]=y=>s(N)(t.value))},{default:o(()=>[l("删除订单")]),_:1},8,["loading"]),e(n,{type:"primary",round:"",to:"/"},{default:o(()=>[l("咨询其他医生")]),_:1}),e(j,{show:v.value,"onUpdate:show":i[4]||(i[4]=y=>v.value=y),"order-id":t.value.id,actualPayment:t.value.actualPayment},null,8,["show","order-id","actualPayment"])])):m("",!0)])):(u(),p("div",Tt,[e(k,{title:"问诊详情"}),e(b,{title:"",row:4,style:{"margin-top":"30px"}}),e(b,{title:"",row:4,style:{"margin-top":"30px"}})]))}}});const Zt=et(Ot,[["__scopeId","data-v-9fb5b7ea"]]);export{Zt as default};
