import{c as V,u as q,n as y,t as p,F as R,p as $,w as A}from"./index-a2f0c7ad.js";import{u as C}from"./request-14faacb8.js";import{d as T,c as x}from"./index-e92d1c66.js";const[M,N]=V("form"),_={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:y,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:p,showErrorMessage:p,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var I=T({name:M,props:_,emits:["submit","failed"],setup(o,{emit:l,slots:u}){const{children:r,linkChildren:h}=q(R),i=e=>e?r.filter(t=>e.includes(t.name)):r,v=e=>new Promise((t,s)=>{const n=[];i(e).reduce((S,E)=>S.then(()=>{if(!n.length)return E.validate().then(g=>{g&&n.push(g)})}),Promise.resolve()).then(()=>{n.length?s(n):t()})}),b=e=>new Promise((t,s)=>{const n=i(e);Promise.all(n.map(a=>a.validate())).then(a=>{a=a.filter(Boolean),a.length?s(a):t()})}),w=e=>{const t=r.find(s=>s.name===e);return t?new Promise((s,n)=>{t.validate().then(a=>{a?n(a):s()})}):Promise.reject()},d=e=>typeof e=="string"?w(e):o.validateFirst?v(e):b(e),B=e=>{typeof e=="string"&&(e=[e]),i(e).forEach(s=>{s.resetValidation()})},F=()=>r.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),c=(e,t)=>{r.some(s=>s.name===e?(s.$el.scrollIntoView(t),!0):!1)},m=()=>r.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),f=()=>{const e=m();d().then(()=>l("submit",e)).catch(t=>{l("failed",{values:e,errors:t}),o.scrollToError&&t[0].name&&c(t[0].name)})},P=e=>{$(e),f()};return h({props:o}),C({submit:f,validate:d,getValues:m,scrollToField:c,resetValidation:B,getValidationStatus:F}),()=>{var e;return x("form",{class:N(),onSubmit:P},[(e=u.default)==null?void 0:e.call(u)])}}});const D=A(I),K=[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],W=[{required:!0,message:"请输入密码"},{pattern:/^\w{8,24}$/,message:"密码需8-24个字符"}],X=[{required:!0,message:"请输入验证码"},{pattern:/^\d{6}$/,message:"验证码6个数字"}],Y=[{required:!0,message:"请输入姓名"},{pattern:/^(?:[\u4e00-\u9fa5·]{2,16})$/,message:"中文2-16个字符"}],z=[{required:!0,message:"请输入身份证号"},{pattern:/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/,message:"身份证号不正确"}];export{D as F,X as c,z as i,K as m,Y as n,W as p};
